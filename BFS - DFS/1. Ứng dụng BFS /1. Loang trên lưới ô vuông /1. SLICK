#include <bits/stdc++.h>
using namespace std;

typedef long long ll;
const ll nmax=100005;
const int dx[4]={0,1,0,-1};
const int dy[4]={-1,0,1,0};
bool a[300][300],mark[300][300];
int n,m,d=0;
map <int,int> mp;
queue <pair<int,int>> q;

void bfs(int i, int j)
{
	int dem=1;
	q.push({i,j});
	mark[i][j]=1;
	while(!q.empty())
    {
    	i=q.front().first;j=q.front().second;
    	q.pop();
    	mark[i][j]=1;
    	for(int k=0;k<4;k++)
    	  if(i+dx[k]<=n && j+dy[k]<=m && i+dx[k]>0 && j+dy[k]>0 && a[i+dx[k]][j+dy[k]]==1 && mark[i+dx[k]][j+dy[k]]==0)
    	  {
		  q.push({i+dx[k],j+dy[k]});
		  mark[i+dx[k]][j+dy[k]]=1;
    	  ++dem;
        }
	}
	mp[dem]++;
	d++;
}

void solve()
{
	d=0;
	mp.clear();
	memset(mark,0,300*300);
	for(int i=1;i<=n;i++)
	   for(int j=1;j<=m;j++)
	     if(a[i][j]==1 && mark[i][j]==0)bfs(i,j);
	
}

int main() {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
//    freopen("TEST.INP","r",stdin);
//    freopen("TEST.OUT","w",stdout);
    while(cin>>n>>m)
    {
    	
    	if(n==0 && m==0)return 0;
        for(int i=1;i<=n;i++)
		  for(int j=1;j<=m;j++)cin>>a[i][j];
		solve();	
		cout<<d<<'\n';
		for(auto i=mp.begin();i!=mp.end();++i)cout<<i->first<<" "<<i->second<<'\n';
	} 
    return 0;
}
